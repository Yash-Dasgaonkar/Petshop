{% extends "base.html" %}
{% load CustomFilter%}

{% block content  %}

             <h3>Your cart </h3>

             {% for item in items  %}
             
             
             
             
                             {% include "cartProduct.html" with p=item.Products%}
                             <h1>Quantity::{{item.quantity}}</h1>

                             <form action="{% url 'updateCart' cartItemId=item.id%}">

                                <button type="button" onclick="UpdateQuantity('{{item.id}}',-1)">-</button>
                                <input type="number"  name="quantity" id="quantity-{{item.id}}"value="{{item.quantity}}" min="0">
                                <button type="button" onclick="UpdateQuantity('{{item.id}}',1)">+</button>
                                
                                
                      
                                <button type="submit" class="btn btn-secondary">
                                  Update {% comment %} <a href="{%url 'add_to_cart' productId=p.id %}" style="text-decoration: none; color: white;">Add to Cart </a> {% endcomment %}
                                </button>
                          
                              </form>

                              <button><a href="{% url 'deleteCartItem' cartItemId=item.id%}">Delete</a></button>
                      
                              <script>
                                function UpdateQuantity(productId,operation)
                      
                                {
                                  var quantityInput=document.getElementById("quantity-"+productId)
                                  quantityInput.value;
                                  var currentQuantity=parseInt(quantityInput.value);
                                  var newQuantity=currentQuantity+operation
                                  quantityInput.value=newQuantity;
                      
                                }
                              </script>
             
             
             
             {% endfor %}


             <table border="1" cellpadding="50">
              <tr>
              <th>Product id</th>
              <th>product name</th>
              <th>Quantity</th>
              <th>Price</th>
              <th>Amount</th>

              </tr>
              
              {% for item in items %}
              <tr>
                <th>{{item.Products.id}}</th>
                <th>{{item.Products.product_name}}</th>
                <th>{{item.quantity}}</th>
                <th>{{item.Products.product_price}}</th>
                <th>{{item.Products.product_price | multiply:item.quantity}}</th>
  
              </tr>
                
              
              
              
              {% endfor %}

              <th>
                <td colspan="5">
                  <h1>Final Amount to Pay:{{finalAmount}}                              
                    
                    
                    <button><a href="{% url 'checkout'%}">checkout</a></button>
                  </h1>

                          

             </table>
             









{% endblock   %}